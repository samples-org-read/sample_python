language: python

python:
  - 2.6
#  - 2.7
#  - 3.2
#  - 3.3
#  - 3.4
#  - pypy
  
#after_success:
#  - env
#  - sudo apt-get install software-properties-common
#  - sudo add-apt-repository ppa:ansible/ansible -y
#  - sudo apt-get update
#  - sudo apt-get -y install ansible -y 
#  - sudo apt-get install python-boto -y
#  - sudo ansible --version
#  - ansible-playbook --version
  
install:
  - pip install -r requirements.txt

# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - git log --since=$LAST_SUCCESSFUL_BUILD_TIMESTAMP
#  - git log --pretty='%s (%h: %an)' --since=$LAST_SUCCESSFUL_BUILD_TIMESTAMP
  
script:
  - nosetests test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - which python && coverage run --branch test.py
  - which python && coverage xml -o shippable/codecoverage/coverage.xml test.py

build_image: shippable/minv2
#build_image:
#  name: shippable/minv2
#  net: host
#  privileged: true
#  run_command: 'echo hello cruel world'

    
notifications:
  email:
   - devashish+notify1@shippable.com
