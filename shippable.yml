language: python

python:
  - 2.6
#  - 2.7
#  - 3.2
#  - 3.3
#  - 3.4
#  - pypy
  
#after_success:
#  - env
#  - sudo apt-get install software-properties-common
#  - sudo add-apt-repository ppa:ansible/ansible -y
#  - sudo apt-get update
#  - sudo apt-get -y install ansible -y 
#  - sudo apt-get install python-boto -y
#  - sudo ansible --version
#  - ansible-playbook --version
  
install:
  - pip install -r requirements.txt
env:
  - secure: PDPuZL+RKyyOVIk8FECQPuYUvEdWou9jixRI9UOpfnECuecTFscuLkPka6sDf/9LuhzIJKUEDD0YI53OKJboOWnaWsVpnaz68ZrUQIj8xaMYI1rB4MgT6X9b68kVtJb+pvjhXb5UtmRvLpIoULA0nvBRFCMN8R4LKkosvSk3h76OInUTaiC/y1gUKXpA0XZtqcA63Sq60juDXqq45TBaFoTfe4u2g1plIKAkAbq5O/K0MEi8q2lN4ldhiLIdYpCw2mfNWYj6oxtm96s5mETFNSpQo21y1icQu7WXKsze5OTqR16G1bpfk1k1HCRE3KvIsVI/GCu5nezuS91awb72VQ==
  
# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
  - date +"%s"
  - git log --since=$LAST_SUCCESSFUL_BUILD_TIMESTAMP
  - echo $foo
  - echo $bar
  - echo $baz
#  - git log --pretty='%s (%h: %an)' --since=$LAST_SUCCESSFUL_BUILD_TIMESTAMP
  
script:
  - nosetests test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - which python && coverage run --branch test.py
  - which python && coverage xml -o shippable/codecoverage/coverage.xml test.py

build_image: shippable/minv2
#build_image:
#  name: shippable/minv2
#  net: host
#  privileged: true
#  run_command: 'echo hello cruel world'

    
notifications:
  email:
   - devashish+notify1@shippable.com
